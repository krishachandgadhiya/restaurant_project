{% load static %}
<!DOCTYPE html>
<html>
<head>
    <title>Add Food Item</title>
    <link rel="stylesheet" href="{% static 'adminpanel/css/fooditem.css' %}">
</head>
<body>

<div class="container">

    <!-- LEFT : ADD FORM -->
    <div class="left">
        <u><h3>Add Food Item</h3></u>

        {% if messages %}
            {% for message in messages %}
                <div class="message {{ message.tags }}">{{ message }}</div>
            {% endfor %}
        {% endif %}

        <form method="post">
            {% csrf_token %}

            <label>Category</label>
            <select name="category_id" required>
                <option value="">-- Select Category --</option>
                {% for cat in categories %}
                    <option value="{{ cat.id }}">{{ cat.category_name }}</option>
                {% endfor %}
            </select>

            <label>Subcategory</label>
            <select name="subcategory_id" required>
                <option value="">-- Select Subcategory --</option>
                {% for sub in subcategories %}
                    <option value="{{ sub.id }}">{{ sub.food_item_cat.category_name }} ‚Üí {{ sub.subcategory_name }}</option>
                {% endfor %}
            </select>

            <label>Food Name</label>
            <input type="text" name="name" placeholder="Food Name" required>

            <label>Price</label>
            <input type="number" step="0.01" name="price" placeholder="Price" required>

            <label>Calories</label>
            <input type="number" name="calories" placeholder="Calories" required>

            <label>Available</label>
            <input type="checkbox" name="is_available" checked>

            <button type="submit">Add Food Item</button>
        </form>
    </div>

    <!-- RIGHT : TABLE -->
    <div class="right">
        <u><h3>Existing Food Items</h3></u>

        <table>
            <tr>
                <th>Name</th>
                <th>Category</th>
                <th>Subcategory</th>
                <th>Price</th>
                <th>Calories</th>
                <th>Available</th>
                <th>Action</th>
            </tr>
            {% for item in fooditems %}
            <tr>
                <td>{{ item.name }}</td>
                <td>{{ item.sub_cat.food_item_cat.category_name }}</td>
                <td>{{ item.sub_cat.subcategory_name }}</td>
                <td>{{ item.price }}</td>
                <td>{{ item.calories }}</td>
                <td>{{ item.is_available|yesno:"Yes,No" }}</td>
                <td>
                    <a href="{% url 'update_fooditem' item.id %}">‚úèÔ∏è</a>
                    <a href="{% url 'delete_fooditem' item.id %}" onclick="return confirm('Are you sure you want to delete this food item?')">üóëÔ∏è</a>
                </td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="7">No food items found</td>
            </tr>
            {% endfor %}
        </table>
    </div>

</div>
<a href="{% url 'dashboard' %}" >‚¨Ö Back to dashboard</a>
   
</body>
</html>
